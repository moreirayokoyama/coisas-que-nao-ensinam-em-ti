
<!doctype html>
<html lang="pt" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="Como criar scripts simples usando as capacidades de programação de Bash">
      
      
      
      
        <link rel="prev" href="../01-shell/">
      
      
        <link rel="next" href="../03-text-editors/">
      
      
      <link rel="icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.0, mkdocs-material-9.5.29">
    
    
      
        <title>Aula 02 - Introdução a Criação Scripts com Bash - Coisas Que Não Ensinam em TI</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.76a95c52.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../stylesheets/extra.css">
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
      
        <meta  property="og:type"  content="website" >
      
        <meta  property="og:title"  content="Aula 02 - Introdução a Criação Scripts com Bash - Coisas Que Não Ensinam em TI" >
      
        <meta  property="og:description"  content="Como criar scripts simples usando as capacidades de programação de Bash" >
      
        <meta  property="og:image"  content="./assets/images/social/aulas/02-scripting.png" >
      
        <meta  property="og:image:type"  content="image/png" >
      
        <meta  property="og:image:width"  content="1200" >
      
        <meta  property="og:image:height"  content="630" >
      
        <meta  property="og:url"  content="None" >
      
        <meta  name="twitter:card"  content="summary_large_image" >
      
        <meta  name="twitter:title"  content="Aula 02 - Introdução a Criação Scripts com Bash - Coisas Que Não Ensinam em TI" >
      
        <meta  name="twitter:description"  content="Como criar scripts simples usando as capacidades de programação de Bash" >
      
        <meta  name="twitter:image"  content="./assets/images/social/aulas/02-scripting.png" >
      
    
    
   <link href="../../assets/stylesheets/glightbox.min.css" rel="stylesheet"/><style>
    html.glightbox-open { overflow: initial; height: 100%; }
    .gslide-title { margin-top: 0px; user-select: text; }
    .gslide-desc { color: #666; user-select: text; }
    .gslide-image img { background: white; }
    .gscrollbar-fixer { padding-right: 15px; }
    .gdesc-inner { font-size: 0.75rem; }
    body[data-md-color-scheme="slate"] .gdesc-inner { background: var(--md-default-bg-color);}
    body[data-md-color-scheme="slate"] .gslide-title { color: var(--md-default-fg-color);}
    body[data-md-color-scheme="slate"] .gslide-desc { color: var(--md-default-fg-color);}</style> <script src="../../assets/javascripts/glightbox.min.js"></script></head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="slate" data-md-color-primary="teal" data-md-color-accent="indigo">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#aula-2-introducao-a-criacao-scripts-com-bash" class="md-skip">
          Pular para conteúdo
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Cabeçalho">
    <a href="../.." title="Coisas Que Não Ensinam em TI" class="md-header__button md-logo" aria-label="Coisas Que Não Ensinam em TI" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Coisas Que Não Ensinam em TI
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Aula 02 - Introdução a Criação Scripts com Bash
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="slate" data-md-color-primary="teal" data-md-color-accent="indigo"  aria-label="Modo claro"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="Modo claro" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 7a5 5 0 0 1 5 5 5 5 0 0 1-5 5 5 5 0 0 1-5-5 5 5 0 0 1 5-5m0 2a3 3 0 0 0-3 3 3 3 0 0 0 3 3 3 3 0 0 0 3-3 3 3 0 0 0-3-3m0-7 2.39 3.42C13.65 5.15 12.84 5 12 5c-.84 0-1.65.15-2.39.42L12 2M3.34 7l4.16-.35A7.2 7.2 0 0 0 5.94 8.5c-.44.74-.69 1.5-.83 2.29L3.34 7m.02 10 1.76-3.77a7.131 7.131 0 0 0 2.38 4.14L3.36 17M20.65 7l-1.77 3.79a7.023 7.023 0 0 0-2.38-4.15l4.15.36m-.01 10-4.14.36c.59-.51 1.12-1.14 1.54-1.86.42-.73.69-1.5.83-2.29L20.64 17M12 22l-2.41-3.44c.74.27 1.55.44 2.41.44.82 0 1.63-.17 2.37-.44L12 22Z"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo"  aria-label="Modo noturno"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Modo noturno" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m17.75 4.09-2.53 1.94.91 3.06-2.63-1.81-2.63 1.81.91-3.06-2.53-1.94L12.44 4l1.06-3 1.06 3 3.19.09m3.5 6.91-1.64 1.25.59 1.98-1.7-1.17-1.7 1.17.59-1.98L15.75 11l2.06-.05L18.5 9l.69 1.95 2.06.05m-2.28 4.95c.83-.08 1.72 1.1 1.19 1.85-.32.45-.66.87-1.08 1.27C15.17 23 8.84 23 4.94 19.07c-3.91-3.9-3.91-10.24 0-14.14.4-.4.82-.76 1.27-1.08.75-.53 1.93.36 1.85 1.19-.27 2.86.69 5.83 2.89 8.02a9.96 9.96 0 0 0 8.02 2.89m-1.64 2.02a12.08 12.08 0 0 1-7.8-3.47c-2.17-2.19-3.33-5-3.49-7.82-2.81 3.14-2.7 7.96.31 10.98 3.02 3.01 7.84 3.12 10.98.31Z"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var media,input,key,value,palette=__md_get("__palette");if(palette&&palette.color){"(prefers-color-scheme)"===palette.color.media&&(media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']"),palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent"));for([key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Buscar" placeholder="Buscar" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Pesquisar">
        
          <a href="javascript:void(0)" class="md-search__icon md-icon" title="Compartilhar" aria-label="Compartilhar" data-clipboard data-clipboard-text="" data-md-component="search-share" tabindex="-1">
            
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7 0-.24-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9a3 3 0 0 0-3 3 3 3 0 0 0 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.15c-.05.21-.08.43-.08.66 0 1.61 1.31 2.91 2.92 2.91 1.61 0 2.92-1.3 2.92-2.91A2.92 2.92 0 0 0 18 16.08Z"/></svg>
          </a>
        
        <button type="reset" class="md-search__icon md-icon" title="Limpar" aria-label="Limpar" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
        <div class="md-search__suggest" data-md-component="search-suggest"></div>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Inicializando busca
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/moreirayokoyama/coisas-que-nao-ensinam-em-ti" title="Ir para repositório" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.5.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    moreirayokoyama/coisas-que-nao-ensinam-em-ti
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navegação" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="Coisas Que Não Ensinam em TI" class="md-nav__button md-logo" aria-label="Coisas Que Não Ensinam em TI" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    Coisas Que Não Ensinam em TI
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/moreirayokoyama/coisas-que-nao-ensinam-em-ti" title="Ir para repositório" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.5.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    moreirayokoyama/coisas-que-nao-ensinam-em-ti
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Coisas Que Não Ensinam em TI
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" checked>
        
          
          <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Aulas
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            Aulas
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../01-shell/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Aula 01 - O Shell
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  <span class="md-ellipsis">
    Aula 02 - Introdução a Criação Scripts com Bash
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  <span class="md-ellipsis">
    Aula 02 - Introdução a Criação Scripts com Bash
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Índice">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Índice
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#21-imprimindo-valores-hello-world" class="md-nav__link">
    <span class="md-ellipsis">
      2.1 - Imprimindo Valores (Hello world)
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#22-expressoes-e-expansoes-do-shell" class="md-nav__link">
    <span class="md-ellipsis">
      2.2 - Expressões e Expansões do Shell
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#23-definindo-variaveis" class="md-nav__link">
    <span class="md-ellipsis">
      2.3 - Definindo variáveis
    </span>
  </a>
  
    <nav class="md-nav" aria-label="2.3 - Definindo variáveis">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#231-interpolacao-de-valores" class="md-nav__link">
    <span class="md-ellipsis">
      2.3.1 - Interpolação de Valores
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#232-variaveis-de-ambiente" class="md-nav__link">
    <span class="md-ellipsis">
      2.3.2 - Variáveis de ambiente
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#233-o-ambiente" class="md-nav__link">
    <span class="md-ellipsis">
      2.3.3 O Ambiente
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#234-sessoes" class="md-nav__link">
    <span class="md-ellipsis">
      2.3.4 Sessões
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#24-composicao-de-comandos-e-operacoes-logicas" class="md-nav__link">
    <span class="md-ellipsis">
      2.4 - Composição de Comandos e Operações Lógicas
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#25-expansoes-de-chave" class="md-nav__link">
    <span class="md-ellipsis">
      2.5 - Expansões de Chave
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#26-stream-de-erro" class="md-nav__link">
    <span class="md-ellipsis">
      2.6 - Stream de Erro
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#27-shell-script" class="md-nav__link">
    <span class="md-ellipsis">
      2.7 - Shell Script
    </span>
  </a>
  
    <nav class="md-nav" aria-label="2.7 - Shell Script">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#271-criando-e-executando-scripts" class="md-nav__link">
    <span class="md-ellipsis">
      2.7.1 - Criando e Executando Scripts
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#272-recebendo-argumentos-em-scripts" class="md-nav__link">
    <span class="md-ellipsis">
      2.7.2 - Recebendo argumentos em Scripts
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#28-conclusao" class="md-nav__link">
    <span class="md-ellipsis">
      2.8 - Conclusão
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../03-text-editors/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Aula 03 - Explorando o Editor de Textos (Visual Studio Code)
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../04-source-control/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Aula 04 - Sistema de Controle de Versionamento de Código - Git
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Índice">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Índice
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#21-imprimindo-valores-hello-world" class="md-nav__link">
    <span class="md-ellipsis">
      2.1 - Imprimindo Valores (Hello world)
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#22-expressoes-e-expansoes-do-shell" class="md-nav__link">
    <span class="md-ellipsis">
      2.2 - Expressões e Expansões do Shell
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#23-definindo-variaveis" class="md-nav__link">
    <span class="md-ellipsis">
      2.3 - Definindo variáveis
    </span>
  </a>
  
    <nav class="md-nav" aria-label="2.3 - Definindo variáveis">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#231-interpolacao-de-valores" class="md-nav__link">
    <span class="md-ellipsis">
      2.3.1 - Interpolação de Valores
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#232-variaveis-de-ambiente" class="md-nav__link">
    <span class="md-ellipsis">
      2.3.2 - Variáveis de ambiente
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#233-o-ambiente" class="md-nav__link">
    <span class="md-ellipsis">
      2.3.3 O Ambiente
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#234-sessoes" class="md-nav__link">
    <span class="md-ellipsis">
      2.3.4 Sessões
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#24-composicao-de-comandos-e-operacoes-logicas" class="md-nav__link">
    <span class="md-ellipsis">
      2.4 - Composição de Comandos e Operações Lógicas
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#25-expansoes-de-chave" class="md-nav__link">
    <span class="md-ellipsis">
      2.5 - Expansões de Chave
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#26-stream-de-erro" class="md-nav__link">
    <span class="md-ellipsis">
      2.6 - Stream de Erro
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#27-shell-script" class="md-nav__link">
    <span class="md-ellipsis">
      2.7 - Shell Script
    </span>
  </a>
  
    <nav class="md-nav" aria-label="2.7 - Shell Script">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#271-criando-e-executando-scripts" class="md-nav__link">
    <span class="md-ellipsis">
      2.7.1 - Criando e Executando Scripts
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#272-recebendo-argumentos-em-scripts" class="md-nav__link">
    <span class="md-ellipsis">
      2.7.2 - Recebendo argumentos em Scripts
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#28-conclusao" class="md-nav__link">
    <span class="md-ellipsis">
      2.8 - Conclusão
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  

  
  


<div><h1 id="aula-2-introducao-a-criacao-scripts-com-bash">Aula 2 - Introdução a Criação Scripts com Bash</h1>
<p>Na aula passada fomos apresentados ao ambiente do Shell e começamos a nos familiarizar com a vida no terminal usando Bash. Apesar de termos explorado muitas ferramentas que nos permitem interagir com o sistema de arquivos, o uso do Shell não está relegado somente a manipular arquivos e diretórios. É possível usar o Shell como um ambiente produtivo para lidar com as mais diversas tarefas e, inclusive, automatizá-las.</p>
<p>Nesta aula iremos explorar as capacidades de automação do Bash e criar scripts que expandem a sua utilidade na execução de tarefas rotineiras, que o tornam, basicamente, uma linguagem de programação não muito diferente das muitas linguagens disponíveis.</p>
<h2 id="21-imprimindo-valores-hello-world">2.1 - Imprimindo Valores (Hello world)</h2>
<p>A operação mais básica que as linguagens de programação apresentam é a capacidade de imprimir um valor para o usuário. O ritual de iniciação padrão para todos os que estudam uma linguagem de programação é imprimir a mensagem universal "Hello, world" (<em>Olá mundo</em>). Usando Bash, o comando que usamos para imprimir mensagens para o usuário é o comando <code>echo</code>.</p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-0-1"><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a><span class="nb">echo</span><span class="w"> </span><span class="s2">"Hello world"</span>
</span></code></pre></div>
<p>Como vimos na aula passada, as aspas (<code>"</code>) são necessárias quando queremos usar espaços nos argumentos dos comandos que usamos no Bash, de outra forma o Bash iria interpretar os espaços como separadores de argumentos, possibilitando resultados inesperados. No caso do comando <code>echo</code>, independente de quantos argumentos você usa, o comportamento dele será o mesmo.</p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-1-1"><a id="__codelineno-1-1" name="__codelineno-1-1" href="#__codelineno-1-1"></a><span class="nb">echo</span><span class="w"> </span>Hello<span class="w"> </span>world
</span></code></pre></div>
<p>Mas, é de bom tom seguir a convenção e usar delimitadores (<code>"</code> ou <code>'</code>) para garantir a consistência dos argumentos. Ao longo desta aula, manter esta consistência fará mais sentido, à medida que veremos como argumentos podem ser transformados ou reutilizados.</p>
<h2 id="22-expressoes-e-expansoes-do-shell">2.2 - Expressões e Expansões do Shell</h2>
<p>O uso de delimitadores, como o que usamos para definir o argumento <code>"Hello world"</code> para o comando <code>echo</code>, é um exemplo de uma <em>expressão</em>. Expressões são formas de criar valores em uma linguagem de programação, e em Bash não é diferente. Expressões de textos são as mais simples que podemos usar, mas existem outros tipos de expressões, e falaremos um pouco sobre alguns deles.</p>
<p>Um tipo de expressão comum em Bash, são expressões que expandem seu conteúdo baseado em algumas operações disponíveis. Existem vários tipos de expansões que podemos utilizar quando escrevemos expressões em Bash. Uma delas é, por exemplo, expandir o resultado da execução de um comando para utilizá-lo em uma instrução. Para criar expressões deste tipo, usamos a expansão <code>$(&lt;comando-bash&gt;)</code>.</p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-2-1"><a id="__codelineno-2-1" name="__codelineno-2-1" href="#__codelineno-2-1"></a><span class="nb">echo</span><span class="w"> </span><span class="k">$(</span>ls<span class="k">)</span>
</span></code></pre></div>
<p>A linha acima executa o comando <code>ls</code> e usa a saída como uma expressão que é então passada para o comando <code>echo</code>. O resultado é semelhante à execução do comando <code>ls</code> no shell (a exibição da lista de arquivos). A diferença é que podemos usar esta expansão em outras operações, não apenas para exibí-las (usando o comando <code>echo</code>), mas também, por exemplo, atribuir este valor a variáveis e reutilizá-las para outros fins, como veremos em breve.</p>
<p>É possível, também, expandir expressões aritméticas e exibir seu resultado. Para criarmos uma expressão aritmética, usamos a expansão <code>$(( &lt;expressão-aritmética&gt; ))</code>. Desta forma, o shell não tentará interpretar a expressão como se fosse um comando.</p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-3-1"><a id="__codelineno-3-1" name="__codelineno-3-1" href="#__codelineno-3-1"></a><span class="nb">echo</span><span class="w"> </span><span class="k">$((</span><span class="m">7</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="m">8</span><span class="k">))</span>
</span><span id="__span-3-2"><a id="__codelineno-3-2" name="__codelineno-3-2" href="#__codelineno-3-2"></a><span class="nb">echo</span><span class="w"> </span><span class="k">$((</span><span class="m">7</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="m">8</span><span class="k">))</span>
</span><span id="__span-3-3"><a id="__codelineno-3-3" name="__codelineno-3-3" href="#__codelineno-3-3"></a><span class="nb">echo</span><span class="w"> </span><span class="k">$((</span><span class="o">(</span><span class="m">7</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="m">3</span><span class="o">)</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="o">(</span><span class="m">8</span><span class="w"> </span><span class="o">%</span><span class="w"> </span><span class="m">3</span><span class="k">))</span><span class="o">)</span>
</span></code></pre></div>
<h2 id="23-definindo-variaveis">2.3 - Definindo variáveis</h2>
<p>Como em qualquer linguagem de programação, em Bash nós podemos definir variáveis para guardar valores que precisam ser reutilizados. Para definir variáveis em Bash, tudo o que precisamos fazer é uma atribuição de um valor a um nome, usando o operador <code>=</code>. O único cuidado que devemos ao fazermos uma atribuição é redobrar nossa atenção ao fato de que, em Bash, espaços contam. Por exemplo:</p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-4-1"><a id="__codelineno-4-1" name="__codelineno-4-1" href="#__codelineno-4-1"></a><span class="nv">foo</span><span class="o">=</span>bar<span class="w"> </span><span class="c1"># Atribuição do valor `bar` a uma nova variável chamada `foo`</span>
</span><span id="__span-4-2"><a id="__codelineno-4-2" name="__codelineno-4-2" href="#__codelineno-4-2"></a><span class="nv">foo</span><span class="w"> </span><span class="o">=</span><span class="w"> </span>bar<span class="w"> </span><span class="c1"># Erro. O Bash tenta executar um comando chamado `foo` com 2 argumentos (`-` e `bar`).</span>
</span></code></pre></div>
<p>Para usarmos as variáveis que criamos, nós nos referimos a elas usando o sinal <code>$</code> como prefixo. Por exemplo:</p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-5-1"><a id="__codelineno-5-1" name="__codelineno-5-1" href="#__codelineno-5-1"></a><span class="nb">echo</span><span class="w"> </span><span class="nv">$foo</span>
</span></code></pre></div>
<p>Qualquer resultado de uma expressão pode ser atribuído a uma variável:</p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-6-1"><a id="__codelineno-6-1" name="__codelineno-6-1" href="#__codelineno-6-1"></a><span class="nv">soma</span><span class="o">=</span><span class="k">$((</span><span class="m">7</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="m">8</span><span class="k">))</span>
</span></code></pre></div>
<h3 id="231-interpolacao-de-valores">2.3.1 - Interpolação de Valores</h3>
<p>Interpolação de valores é a capacidade que o Bash tem de identificar marcadores em valores de texto para substituir por valores computados durante a execução do comando. Por exemplo:</p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-7-1"><a id="__codelineno-7-1" name="__codelineno-7-1" href="#__codelineno-7-1"></a><span class="nb">echo</span><span class="w"> </span><span class="s2">"o conteúdo da variável foo é </span><span class="nv">$foo</span><span class="s2">"</span>
</span></code></pre></div>
<p>No código acima, o Bash vai identificar o uso da variável foo (usada com o <code>$</code>), e vai substituir este marcador pelo valor da variável.</p>
<p>A interpolação de valores só funciona com textos delimitados por <code>"</code> (aspas). Se o texto for delimitado por <code>'</code> (apóstrofos), o bash trata o texto como literal e não faz a interpolação. Esta distinção tem suas vantagens, como por exemplo, quando você quer que a interpolação aconteça em um momento diferente do da execução do script, delegando a interpolação para outra etapa da automação, ou outro processo que será executado.</p>
<p>Podemos, também, interpolar valores resultantes de quaisquer tipos expressões suportadas pelo Bash.</p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-8-1"><a id="__codelineno-8-1" name="__codelineno-8-1" href="#__codelineno-8-1"></a><span class="nb">echo</span><span class="w"> </span><span class="s2">"Interpolando o valor de uma variável: </span><span class="nv">$foo</span><span class="s2">"</span>
</span><span id="__span-8-2"><a id="__codelineno-8-2" name="__codelineno-8-2" href="#__codelineno-8-2"></a><span class="nb">echo</span><span class="w"> </span><span class="s2">"Interpolando o resultado de um comando: </span><span class="k">$(</span>ls<span class="w"> </span>-lha<span class="w"> </span>~<span class="w"> </span><span class="p">|</span><span class="w"> </span>grep<span class="w"> </span>Jul<span class="k">)</span><span class="s2">"</span>
</span><span id="__span-8-3"><a id="__codelineno-8-3" name="__codelineno-8-3" href="#__codelineno-8-3"></a><span class="nb">echo</span><span class="w"> </span><span class="s2">"Interpolando o resultado de uma expressão aritmética: </span><span class="k">$((</span><span class="m">2</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="m">3</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="m">4</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="m">5</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="m">6</span><span class="w"> </span><span class="o">%</span><span class="w"> </span><span class="m">7</span><span class="k">))</span><span class="s2">"</span>
</span></code></pre></div>
<h3 id="232-variaveis-de-ambiente">2.3.2 - Variáveis de ambiente</h3>
<p>Variáveis de ambiente são valores que são carregados na sessão do shell e que ficam disponíveis para os programas e comandos que usamos ao longo desta sessão. Elas funcionam como qualquer outra variável definida no shell, com a diferença de que elas já estão criadas e disponíveis para serem usadas.</p>
<p>Uma forma de listar as variáveis de ambiente carregadas na sessão do shell é através do comando <code>export</code>.</p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-9-1"><a id="__codelineno-9-1" name="__codelineno-9-1" href="#__codelineno-9-1"></a><span class="nb">export</span><span class="w"> </span><span class="c1"># Lista as variáveis de ambiente da sessão atual</span>
</span></code></pre></div>
<p>Qualquer uma dessas variáveis podem ser usadas a partir de comandos no shell da mesma forma como as variáveis que definimos até aqui.</p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-10-1"><a id="__codelineno-10-1" name="__codelineno-10-1" href="#__codelineno-10-1"></a><span class="nb">echo</span><span class="w"> </span><span class="nv">$HOME</span>
</span><span id="__span-10-2"><a id="__codelineno-10-2" name="__codelineno-10-2" href="#__codelineno-10-2"></a><span class="nb">echo</span><span class="w"> </span><span class="nv">$HOSTTYPE</span>
</span><span id="__span-10-3"><a id="__codelineno-10-3" name="__codelineno-10-3" href="#__codelineno-10-3"></a><span class="nb">echo</span><span class="w"> </span><span class="s2">"O diretório atual da sessão é </span><span class="nv">$PWD</span><span class="s2">, o diretório anterior é </span><span class="nv">$OLDPWD</span><span class="s2">"</span>
</span></code></pre></div>
<p>Dentre as variáveis de ambiente, uma variável muito importante que afeta a forma como usamos o shell é a variável $PATH. Esta variável orienta o shell sobre em quais diretórios ele precisa buscar os programas que usamos. Por exemplo, quando usamos o programa <code>echo</code>, ou <code>grep</code>, ou outros programas que temos usado até aqui, o shell precisa saber como localizá-los e, para isto, usa a variável <code>$PATH</code>.</p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-11-1"><a id="__codelineno-11-1" name="__codelineno-11-1" href="#__codelineno-11-1"></a><span class="nb">echo</span><span class="w"> </span><span class="nv">$PATH</span>
</span></code></pre></div>
<p>Uma forma de saber onde está um dado programa que usamos é através do comando <code>which</code>.</p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-12-1"><a id="__codelineno-12-1" name="__codelineno-12-1" href="#__codelineno-12-1"></a>which<span class="w"> </span><span class="nb">echo</span><span class="w"> </span><span class="c1"># imprime o endereço do programa echo</span>
</span></code></pre></div>
<p>Com certeza, você irá encontrar o diretório exibido no caminho do comando <code>echo</code> como parte da variável <code>$PATH</code>, do contrário não seria possível usá-lo.</p>
<p>Para definir variáveis de ambiente na sessão do shell, também usamos o comando <code>export</code>, porém atribuindo o valor à variável que desejamos criar:</p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-13-1"><a id="__codelineno-13-1" name="__codelineno-13-1" href="#__codelineno-13-1"></a><span class="nb">export</span><span class="w"> </span><span class="nv">foo</span><span class="o">=</span>bar
</span><span id="__span-13-2"><a id="__codelineno-13-2" name="__codelineno-13-2" href="#__codelineno-13-2"></a><span class="nv">x</span><span class="o">=</span>y
</span><span id="__span-13-3"><a id="__codelineno-13-3" name="__codelineno-13-3" href="#__codelineno-13-3"></a><span class="nb">export</span>
</span></code></pre></div>
<p>Note que agora, entre as variáveis listadas, encontra-se a variável <code>foo</code> e seu valor. Por outro lado, a variável <code>x</code> não faz parte do ambiente, ela está carregada no shell, mas não é tratada como parte do ambiente.</p>
<h3 id="233-o-ambiente">2.3.3 O Ambiente</h3>
<p>O <em>ambiente</em> é uma lista de pares de <code>nome=valor</code> carregados na sessão do shell e que são fornecidos para os programas executados a partir daquela sessão. Isso é uma forma útil de fazer com que programas e scripts que executamos possam receber valores sem a necessidade de informá-los através de argumentos.</p>
<p>Veremos com mais detalhes como o ambiente funciona na <a href="05-command-line-environment.md">aula sobre o ambiente de linha de comando</a>, quando discutiremos a execução de programas a partir do ambiente de linha de comando.</p>
<h3 id="234-sessoes">2.3.4 Sessões</h3>
<p>Como acabamos de descrever, as variáveis de ambiente ficam disponíveis na sessão do Shell. A sessão do shell dura enquanto o shell estiver aberto. Se você sair do Bash, você encerra a sessão, e o ambiente daquela sessão deixa de existir.</p>
<p>Faça este teste, encerre o shell no terminal atual (fechando o terminal) e abra novamente o terminal. Uma nova sessão será criada e, se você executar o comando <code>export</code>, notará que a variável <code>foo</code> que acabamos de criar não está mais disponível.</p>
<p>As variáveis que você vê listadas através do comando <code>export</code> quando inicia uma nova sessão do shell são atribuídas ao ambiente durante a inicialização da sessão. Isto acontece graças a alguns scripts que são invocados no momento em que a sessão é iniciada.</p>
<p>Por exemplo, o script <code>~/.bashrc</code> possui a definição de diversas variáveis de ambiente. Outro arquivo útil é o <code>~/.profile</code> ou o <code>~/.profile_bash</code> (podem não existir no seu sistema, mas também são formas de definir o ambiente da sessão).</p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-14-1"><a id="__codelineno-14-1" name="__codelineno-14-1" href="#__codelineno-14-1"></a>cat<span class="w"> </span>~/.bashrc
</span><span id="__span-14-2"><a id="__codelineno-14-2" name="__codelineno-14-2" href="#__codelineno-14-2"></a>cat<span class="w"> </span>~/.profile
</span><span id="__span-14-3"><a id="__codelineno-14-3" name="__codelineno-14-3" href="#__codelineno-14-3"></a>cat<span class="w"> </span>~/.profile_bash
</span></code></pre></div>
<p>É interessante saber como o ambiente é criado na inicialização da sessão (através de arquivos como estes), para entendermos que todo o ambiente é facilmente configurável no shell, e que as coisas não acontecem como mágica.</p>
<h2 id="24-composicao-de-comandos-e-operacoes-logicas">2.4 - Composição de Comandos e Operações Lógicas</h2>
<p>Bash suporta uma forma de criar uma composição de comandos em uma única instrução usando o separador <code>;</code>. Por exemplo:</p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-15-1"><a id="__codelineno-15-1" name="__codelineno-15-1" href="#__codelineno-15-1"></a><span class="nb">echo</span><span class="w"> </span><span class="s2">"Olá mundo"</span><span class="p">;</span><span class="w"> </span>date<span class="w"> </span><span class="p">;</span><span class="w"> </span><span class="nb">echo</span><span class="w"> </span><span class="s2">"Bom trabalho."</span>
</span></code></pre></div>
<p>Outra forma de compor comandos em uma única instrução é usando o operador <code>&amp;</code>. A diferença entre compor comandos com <code>;</code> e <code>&amp;</code>, é que com <code>;</code> ele sempre executa o comando seguido por <code>;</code> de forma síncrona, esperando o fim da sua execução antes de executar o próximo, enquanto que com <code>&amp;</code>, o bash executa cada comando seguido por <code>&amp;</code> em um novo processo assíncrono, e inicia a execução do próximo sem aguardar a sua finalização.</p>
<p>Instruções como esta acima executam cada comando na ordem em que eles são escritos, mas sem conectá-los de forma alguma (como vimos na aula anterior na seção <a href="../01-shell/#27-conectando-programas">Conectando Programas</a>).</p>
<p>Usar este tipo de composição executa todos os comandos independente do resultado de qualquer um deles. Se houver um erro em algum comando desta cadeia, isso não fará com que o bash deixe de executar os demais comandos.</p>
<p>Existem cenários onde a execução de alguns comandos da composição pode gerar resultados que afetem o funcionamento dos demais comandos. Para estes cenários, usamos operações lógicas.</p>
<p>Bash, como qualquer outra linguagem de programação suporta certos tipos de operações lógicas. Operações lógicas são operações que geram resultados binários (<em>verdadeiro</em> ou <em>falso</em>), e que podem ser usadas para criar uma composição de comandos baseada no resultado dos comandos usados.</p>
<p>Os operadores lógicos que usaremos aqui são o <code>||</code> (operador <em>OU</em>) e o <code>&amp;&amp;</code> (operador <em>E</em>). E os valores lógicos em Bash são <code>true</code> (representa o valor <em>verdadeiro</em>) e <code>false</code> (que representa o valor <em>falso</em>).</p>
<p>Vamos ver alguns exemplos básicos de expressões lógicas:
</p><div class="language-bash highlight"><pre><span></span><code><span id="__span-16-1"><a id="__codelineno-16-1" name="__codelineno-16-1" href="#__codelineno-16-1"></a><span class="nb">echo</span><span class="w"> </span><span class="nb">true</span>
</span><span id="__span-16-2"><a id="__codelineno-16-2" name="__codelineno-16-2" href="#__codelineno-16-2"></a><span class="nb">echo</span><span class="w"> </span><span class="nb">false</span>
</span><span id="__span-16-3"><a id="__codelineno-16-3" name="__codelineno-16-3" href="#__codelineno-16-3"></a>
</span><span id="__span-16-4"><a id="__codelineno-16-4" name="__codelineno-16-4" href="#__codelineno-16-4"></a><span class="nb">echo</span><span class="w"> </span><span class="nb">true</span><span class="w"> </span><span class="o">||</span><span class="w"> </span><span class="nb">true</span>
</span><span id="__span-16-5"><a id="__codelineno-16-5" name="__codelineno-16-5" href="#__codelineno-16-5"></a><span class="nb">echo</span><span class="w"> </span><span class="nb">true</span><span class="w"> </span><span class="o">||</span><span class="w"> </span><span class="nb">false</span>
</span><span id="__span-16-6"><a id="__codelineno-16-6" name="__codelineno-16-6" href="#__codelineno-16-6"></a><span class="nb">echo</span><span class="w"> </span><span class="nb">false</span><span class="w"> </span><span class="o">||</span><span class="w"> </span><span class="nb">true</span>
</span><span id="__span-16-7"><a id="__codelineno-16-7" name="__codelineno-16-7" href="#__codelineno-16-7"></a><span class="nb">echo</span><span class="w"> </span><span class="nb">false</span><span class="w"> </span><span class="o">||</span><span class="w"> </span><span class="nb">false</span>
</span><span id="__span-16-8"><a id="__codelineno-16-8" name="__codelineno-16-8" href="#__codelineno-16-8"></a>
</span><span id="__span-16-9"><a id="__codelineno-16-9" name="__codelineno-16-9" href="#__codelineno-16-9"></a><span class="nb">echo</span><span class="w"> </span><span class="nb">true</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="nb">true</span>
</span><span id="__span-16-10"><a id="__codelineno-16-10" name="__codelineno-16-10" href="#__codelineno-16-10"></a><span class="nb">echo</span><span class="w"> </span><span class="nb">true</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="nb">false</span>
</span><span id="__span-16-11"><a id="__codelineno-16-11" name="__codelineno-16-11" href="#__codelineno-16-11"></a><span class="nb">echo</span><span class="w"> </span><span class="nb">false</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="nb">true</span>
</span><span id="__span-16-12"><a id="__codelineno-16-12" name="__codelineno-16-12" href="#__codelineno-16-12"></a><span class="nb">echo</span><span class="w"> </span><span class="nb">false</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="nb">false</span>
</span></code></pre></div>
<p>Os operadores lógicos possuem a capacidade de garantir certos resultados baseados no valor dos operandos: O operador <code>||</code> (<em>OU</em>) resulta em <code>true</code> (<em>verdadeiro</em>) quando qualquer um dos operandos, ou ambos, são verdadeiros, e só resulta em <code>false</code>(<em>falso</em>) quando ambos os operandos são falsos. Por outro lado, o operador <code>&amp;&amp;</code> (<em>E</em>), só resulta em true quando ambos os operandos são verdadeiros, mas resulta em false quando qualquer um deles, ou ambos, são false.</p>
<p>Ambos os operadores também possuem a propriedade de descartar o segundo operando de acordo com certos critérios sobre o primeiro. Por exemplo, por que o operador <code>||</code> resulta em <code>true</code> caso qualquer operando seja verdadeiro, se o primeiro operando (à esquerda do operador) resultar em <code>true</code>, o operador descarta qualquer que seja o valor do segundo operando (à direita do operador) e resulta imediatamente em <code>true</code>.</p>
<p>Já o operador <code>&amp;&amp;</code>, que resulta <code>false</code> caso qualquer um dos operandos seja falso, descarta o segundo operando quando o primeiro já resultou em <code>false</code>, antecipando o resultado da operação.</p>
<p>Estas propriedades são úteis, principalmente quando consideramos que um comando executado sem resultar em erros é considerado como resultando em <code>true</code>, mas caso resulte em qualquer erro tem sua execução resultando como valor <code>false</code>. Por exemplo:</p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-17-1"><a id="__codelineno-17-1" name="__codelineno-17-1" href="#__codelineno-17-1"></a><span class="nb">true</span><span class="w"> </span><span class="o">||</span><span class="w"> </span><span class="nb">echo</span><span class="w"> </span><span class="s2">"Este comando NÃO SERÁ executado"</span>
</span><span id="__span-17-2"><a id="__codelineno-17-2" name="__codelineno-17-2" href="#__codelineno-17-2"></a><span class="nb">false</span><span class="w"> </span><span class="o">||</span><span class="w"> </span><span class="nb">echo</span><span class="w"> </span><span class="s2">"Este comando SERÁ executado"</span>
</span><span id="__span-17-3"><a id="__codelineno-17-3" name="__codelineno-17-3" href="#__codelineno-17-3"></a><span class="nb">true</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="nb">echo</span><span class="w"> </span><span class="s2">"Este comando SERÁ executado"</span>
</span><span id="__span-17-4"><a id="__codelineno-17-4" name="__codelineno-17-4" href="#__codelineno-17-4"></a><span class="nb">false</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="nb">echo</span><span class="w"> </span><span class="s2">"Este comando NÃO SERÁ executado"</span>
</span></code></pre></div>
<p>Isto torna possível criarmos uma composição mais sofisticada de comandos, fazendo com que o resultado de alguns comandos influenciem a execução ou não dos demais.</p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-18-1"><a id="__codelineno-18-1" name="__codelineno-18-1" href="#__codelineno-18-1"></a><span class="nb">echo</span><span class="w"> </span><span class="s2">"Olá mundo"</span><span class="w"> </span><span class="o">||</span><span class="w"> </span><span class="nb">echo</span><span class="w"> </span><span class="s2">"Este comando NÃO SERÁ executado"</span>
</span><span id="__span-18-2"><a id="__codelineno-18-2" name="__codelineno-18-2" href="#__codelineno-18-2"></a>mv<span class="w"> </span>xpto.txt<span class="w"> </span>~<span class="w"> </span><span class="o">||</span><span class="w"> </span><span class="nb">echo</span><span class="w"> </span><span class="s2">"Houve algum problema no comando anterior"</span>
</span><span id="__span-18-3"><a id="__codelineno-18-3" name="__codelineno-18-3" href="#__codelineno-18-3"></a><span class="nb">echo</span><span class="w"> </span><span class="s2">"Esta linha será exibida"</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="nb">echo</span><span class="w"> </span><span class="s2">"Esta também"</span>
</span><span id="__span-18-4"><a id="__codelineno-18-4" name="__codelineno-18-4" href="#__codelineno-18-4"></a>mv<span class="w"> </span>xpto.txt<span class="w"> </span>~<span class="w"> </span><span class="o">||</span><span class="w"> </span><span class="o">(</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"Houve algum problema no comando anterior, criando o arquivo vazio"</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span>touch<span class="w"> </span>~/xpto.txt<span class="o">)</span>
</span></code></pre></div>
<p>Desta forma podemos decidir se queremos apenas que os comandos sejam executados de forma independente (usando o separador <code>;</code>), ou se queremos usar o resultado dos comandos intermediários na composição para definirmos se os comandos posteriores serão ou não executados.</p>
<h2 id="25-expansoes-de-chave">2.5 - Expansões de Chave</h2>
<p><em>Expansões de Chave</em> são um tipo específico de expansão do shell, como os que vimos anteriormente (<code>$()</code> e <code>$(())</code>), que usa expressões cercadas por chaves (<code>{}</code>) para expandir para um conjunto de valores. Por exemplo:</p>
<p></p><div class="language-bash highlight"><pre><span></span><code><span id="__span-19-1"><a id="__codelineno-19-1" name="__codelineno-19-1" href="#__codelineno-19-1"></a><span class="nb">echo</span><span class="w"> </span>a<span class="o">{</span>b,c,d<span class="o">}</span>e
</span></code></pre></div>
 A linha acima vai expandir a expressão <code>a{b,c,d}e</code> para <code>abe ace ade</code>. Note algumas coisas:
 - Cada elemento dentro das chaves foi usado para materializar um elemento no resultado final
 - O resultado foi a expansão dos elementos separados por espaço, na ordem em que eles estão dentro das chaves
<p>É possível combinar mais de uma expansão de chaves na mesma expressão:
</p><div class="language-bash highlight"><pre><span></span><code><span id="__span-20-1"><a id="__codelineno-20-1" name="__codelineno-20-1" href="#__codelineno-20-1"></a><span class="nb">echo</span><span class="w"> </span>ab<span class="o">{</span>c,d<span class="o">}{</span>e,f<span class="o">}</span>gh
</span></code></pre></div>
<p>Não precisamos nos limitar a apenas conjuntos de elementos formados por uma única letra, mas podemos usar valores de tamanhos variados.</p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-21-1"><a id="__codelineno-21-1" name="__codelineno-21-1" href="#__codelineno-21-1"></a><span class="nb">echo</span><span class="w"> </span>ab<span class="o">{</span>cde,fghi<span class="o">}</span>j<span class="w"> </span>
</span></code></pre></div>
<p>O exemplo acima mostra uma expansão com apenas dois elementos, cada um com um tamanho diferente.</p>
<p>Também podemos expandir os elementos dentro das chaves para o intervalo de uma sequência ncremental usando a expansão <code>..</code>. Por exemplo:
</p><div class="language-bash highlight"><pre><span></span><code><span id="__span-22-1"><a id="__codelineno-22-1" name="__codelineno-22-1" href="#__codelineno-22-1"></a><span class="nb">echo</span><span class="w"> </span><span class="o">{</span><span class="m">1</span>..9<span class="o">}</span>
</span><span id="__span-22-2"><a id="__codelineno-22-2" name="__codelineno-22-2" href="#__codelineno-22-2"></a><span class="nb">echo</span><span class="w"> </span><span class="o">{</span>a..z<span class="o">}</span><span class="w"> </span><span class="c1"># podemos usar letras no lugar de números</span>
</span><span id="__span-22-3"><a id="__codelineno-22-3" name="__codelineno-22-3" href="#__codelineno-22-3"></a><span class="nb">echo</span><span class="w"> </span>a<span class="o">{</span><span class="m">1</span>..5<span class="o">}{</span>b..f<span class="o">}</span>g
</span></code></pre></div>
<p>Podemos também controlar a forma como estas sequências são incrementadas:
</p><div class="language-bash highlight"><pre><span></span><code><span id="__span-23-1"><a id="__codelineno-23-1" name="__codelineno-23-1" href="#__codelineno-23-1"></a><span class="nb">echo</span><span class="w"> </span><span class="o">{</span><span class="m">1</span>..9..2<span class="o">}</span><span class="w"> </span><span class="c1"># Incrementa de dois em dois</span>
</span><span id="__span-23-2"><a id="__codelineno-23-2" name="__codelineno-23-2" href="#__codelineno-23-2"></a><span class="nb">echo</span><span class="w"> </span><span class="o">{</span><span class="m">1</span>..9..3<span class="o">}</span><span class="w"> </span><span class="c1"># ou de três em três</span>
</span><span id="__span-23-3"><a id="__codelineno-23-3" name="__codelineno-23-3" href="#__codelineno-23-3"></a><span class="nb">echo</span><span class="w"> </span><span class="o">{</span>a..z..3<span class="o">}</span><span class="w"> </span><span class="c1"># também funciona com letras</span>
</span></code></pre></div>
<p>O fato de expansões deste tipo serem formadas com os elementos separados por espaço as tornam úteis quando usamos estas expansões com comandos que recebem múltiplos argumentos e que podem ser usados de forma mais produtiva. Por exemplo:</p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-24-1"><a id="__codelineno-24-1" name="__codelineno-24-1" href="#__codelineno-24-1"></a>mkdir<span class="w"> </span><span class="o">{</span>foo,bar<span class="o">}</span><span class="w"> </span><span class="c1"># cria dois diretórios</span>
</span><span id="__span-24-2"><a id="__codelineno-24-2" name="__codelineno-24-2" href="#__codelineno-24-2"></a>touch<span class="w"> </span><span class="o">{</span>foo,bar<span class="o">}</span>/<span class="o">{</span>a..h<span class="o">}</span>.<span class="o">{</span>txt,sh<span class="o">}</span><span class="w"> </span><span class="c1"># cria nos dois diretórios um conjunto arquivos .txt</span>
</span><span id="__span-24-3"><a id="__codelineno-24-3" name="__codelineno-24-3" href="#__codelineno-24-3"></a>mkdir<span class="w"> </span>baz
</span><span id="__span-24-4"><a id="__codelineno-24-4" name="__codelineno-24-4" href="#__codelineno-24-4"></a>cp<span class="w"> </span>foo/<span class="o">{</span>a..h..2<span class="o">}</span>.txt<span class="w"> </span>baz
</span><span id="__span-24-5"><a id="__codelineno-24-5" name="__codelineno-24-5" href="#__codelineno-24-5"></a>cp<span class="w"> </span>bar/<span class="o">{</span>a..h..2<span class="o">}</span>.sh<span class="w"> </span>baz
</span></code></pre></div>
<h2 id="26-stream-de-erro">2.6 - Stream de Erro</h2>
<p>Na aula passada nós falamos um pouco sobre os <em>streams</em> que os programas recebem: o <em>stream de entrada</em> e o <em>stream de saída</em>. Existe um terceiro stream que não mencionamos, que é o <em>stream de erro</em>. Ele designa ao programa que está sendo executado para onde as mensagens de erro serão enviadas.</p>
<p>Por padrão, o stream erro é o próprio terminal, como também é o padrão para o stream de saída.</p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-25-1"><a id="__codelineno-25-1" name="__codelineno-25-1" href="#__codelineno-25-1"></a>mv<span class="w"> </span>zaz<span class="w"> </span>~
</span></code></pre></div>
<p>Considerando que não exista um arquivo ou diretório chamado <code>zaz</code>, o comando acima irá gerar uma mensagem de erro e imprimir no terminal. Esta mensagem de erro foi escrita no stream de erro. Para observar isto, podemos religar o stream de saída a um arquivo e observar o comportamento do comando:</p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-26-1"><a id="__codelineno-26-1" name="__codelineno-26-1" href="#__codelineno-26-1"></a>mv<span class="w"> </span>zaz<span class="w"> </span>~<span class="w"> </span>&gt;<span class="w"> </span>zaz.out
</span><span id="__span-26-2"><a id="__codelineno-26-2" name="__codelineno-26-2" href="#__codelineno-26-2"></a>cat<span class="w"> </span>zaz.out
</span></code></pre></div>
<p>Observer que, apesar de termos religado o stream de saída para o arquivo <code>zaz.out</code>, a mensagem de erro continua sendo exibida e o arquivo gerado está vazio. Isto demonstra como a mensagem gerada não foi produzida no stream de saída. Mas, como podemos religar o stream de erro a um arquivo? Podemos fazer isto através do operador <code>2&gt;</code>:</p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-27-1"><a id="__codelineno-27-1" name="__codelineno-27-1" href="#__codelineno-27-1"></a>mv<span class="w"> </span>zaz<span class="w"> </span>~<span class="w"> </span>&gt;<span class="w"> </span>zaz.out<span class="w"> </span><span class="m">2</span>&gt;<span class="w"> </span>zaz.err
</span><span id="__span-27-2"><a id="__codelineno-27-2" name="__codelineno-27-2" href="#__codelineno-27-2"></a>cat<span class="w"> </span>zaz.out
</span></code></pre></div>
<p>Desta vez a mensagem de erro não foi impressa no terminal, e o arquivo <code>zaz.err</code> foi criado, e ele contém a mensagem de erro que antes víamos impressa nos comandos anteriores. Desta forma podemos separar tanto o conteúdo escrito no stream de saída quanto o conteúdo escrito no stream de erro do terminal.</p>
<h2 id="27-shell-script">2.7 - Shell Script</h2>
<p>A capacidade de usar comandos de forma produtiva no Bash nos habilita a elevar esta produtividade através de scripts.</p>
<p>Scripts são arquivos contendo comandos que serão executados pelo shell em sequência, podendo servir como uma ferramenta de automação, ou até mesmo programação.</p>
<p>O uso de scripts usando Bash para automação é tão comum que existem profissionais em posições que se apoiam em Shell Script, como principal atividade no seu dia-a-dia.</p>
<p>Para criar um script, tudo o que precisamos fazer é criar um arquivo texto contendo a lista de comandos que queremos executar (convencionalmente, usando a extensão <code>.sh</code>) e o executamos religando o stream de entrada do comando <code>bash</code> ao arquivo do script.</p>
<div class="admonition important">
<p class="admonition-title">Important</p>
<p>O comando <code>bash</code> é, na realidade, o executável do shell que temos usado até agora. Ao invocarmos o comando <code>bash</code> passando o nosso script como argumento, não estamos fazendo nada diferente do que seria abrir o shell e executarmos os comandos manualmente. A única dirença é que estamos fazendo de forma automatizada.</p>
</div>
<p>Vamos ver como isto funciona.</p>
<h3 id="271-criando-e-executando-scripts">2.7.1 - Criando e Executando Scripts</h3>
<p>Vamos criar o nosso primeiro Script executando o famoso rito de iniciação que discutimos no início desta aula, <code>Olá, mundo</code>.</p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-28-1"><a id="__codelineno-28-1" name="__codelineno-28-1" href="#__codelineno-28-1"></a>cat<span class="w"> </span>&gt;<span class="w"> </span>ola.sh
</span><span id="__span-28-2"><a id="__codelineno-28-2" name="__codelineno-28-2" href="#__codelineno-28-2"></a><span class="nb">echo</span><span class="w"> </span><span class="s2">"Olá, mundo"</span>
</span></code></pre></div>
<p>Para executar nosso script, usamos o comando <code>sh</code>.
</p><div class="language-bash highlight"><pre><span></span><code><span id="__span-29-1"><a id="__codelineno-29-1" name="__codelineno-29-1" href="#__codelineno-29-1"></a>bash<span class="w"> </span>&lt;<span class="w"> </span>./ola.sh
</span></code></pre></div>
<p>O comando <code>sh</code> lê o conteúdo do arquivo <code>olá.sh</code> e o interpreta, executando seus comandos. Podemos, incrementar este script com mais comandos:</p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-30-1"><a id="__codelineno-30-1" name="__codelineno-30-1" href="#__codelineno-30-1"></a>cat<span class="w"> </span>&gt;&gt;<span class="w"> </span>ola.sh
</span><span id="__span-30-2"><a id="__codelineno-30-2" name="__codelineno-30-2" href="#__codelineno-30-2"></a>date
</span><span id="__span-30-3"><a id="__codelineno-30-3" name="__codelineno-30-3" href="#__codelineno-30-3"></a><span class="nb">echo</span><span class="w"> </span><span class="s2">"Bom trabalho"</span>
</span><span id="__span-30-4"><a id="__codelineno-30-4" name="__codelineno-30-4" href="#__codelineno-30-4"></a>bash<span class="w"> </span>&lt;<span class="w"> </span>./ola.sh
</span></code></pre></div>
<p>Note como, desta vez, ele executou todos os comandos do nosso script.</p>
<p>Na verdade, o comando <code>bash</code> é capaz de receber um arquivo de script como argumento e interpretá-lo sem que precisemos religar seu stream de entrada.</p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-31-1"><a id="__codelineno-31-1" name="__codelineno-31-1" href="#__codelineno-31-1"></a>bash<span class="w"> </span>./ola.sh
</span></code></pre></div>
<p>Outra forma de executarmos um script, é transformando-o em um executável. Para isto, precisamos forncecer privilégios de execução para o usuário que pretende fazer este uso. Fazemos isto através do comando <code>chmod</code></p>
<p></p><div class="language-bash highlight"><pre><span></span><code><span id="__span-32-1"><a id="__codelineno-32-1" name="__codelineno-32-1" href="#__codelineno-32-1"></a>stat<span class="w"> </span>./ola.sh
</span></code></pre></div>
<a class="glightbox" href="../../imagens/stats.png" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="image" src="../../imagens/stats.png"></a>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>O comando <code>stat</code> imprime o <em>status</em> do arquivo no sistema. Informações úteis, como tamanho, permissões, data de criação, data da última modificação, quem é o <em>owner</em> e outras.</p>
</div>
<p>Note, a sessão de acesso (<em>access</em>), que ele não possui permissões de execução para nenhum usuário (<code>-rw-r--r--</code>). Para conceder permissão de execução para o arquivo <code>ola.sh</code>, nós usamos o comando <code>chmod</code>. A permissão para execução é representada pelo caractere <code>x</code>.</p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-33-1"><a id="__codelineno-33-1" name="__codelineno-33-1" href="#__codelineno-33-1"></a>chmod<span class="w"> </span>+x<span class="w"> </span>ola.sh
</span></code></pre></div>
<p>Agora, podemos conferir as permissões novamente através do comando <code>stat</code>.</p>
<p></p><div class="language-bash highlight"><pre><span></span><code><span id="__span-34-1"><a id="__codelineno-34-1" name="__codelineno-34-1" href="#__codelineno-34-1"></a>stat<span class="w"> </span>ola.sh
</span></code></pre></div>
<a class="glightbox" href="../../imagens/stats_executable.png" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="image" src="../../imagens/stats_executable.png"></a>
<p>Finalmente, com a devida permissão, somos capazes de executar o script.</p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-35-1"><a id="__codelineno-35-1" name="__codelineno-35-1" href="#__codelineno-35-1"></a>./ola.sh
</span></code></pre></div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>O motivo de precisarmos usar o endereço do nosso escript para executá-lo (<code>./</code>) é que, no <em>bash</em> (bem como em diversos shells compatíveis com o <em>Unix</em>), o shell somente procura por executáveis que estão nos diretórios presentes n variável $PATH. O shell não procura por executáveis no diretório atual, como faz, por exemplo, o shell <code>cmd</code> do Windows. </p>
<p>Portanto, no <em>Bash</em> (e em outros shells compatíveis com unix, como o <em>dash</em> ou o <em>zsh</em>), devemos apontar onde está o executável que pretendemos rodar, mesmo que ele esteja no diretório atual do shell, passando o caminho completo ou relativo do mesmo.</p>
</div>
<p>Mas, antes de prosseguirmos, vamos seguir a convenção de orientar ao shell sobre qual interpretador deverá usar ao executar nosso script, usando a notação chamada de <em>shebang</em>. O <em>shebang</em> é a sequência dos caracteres <code>#!</code>, usada para sistemas compatíveis com <em>Unix</em> (como o linux) para apontar ao shell qual é o interpretador do executável. No nosso caso, até aqui, estamos usando o próprio <em>bash</em> como interpretador (<code>/bin/bash</code>), e será ele mesmo que usaremos no nosso <em>shebang</em>, mas este processo é importante, pois outros interpretadores estão disponíveis.</p>
<p>Então, precisamos colocar o <code>shebang</code> na primeira linha do arquivo e, para isto, precisamos editá-lo, e faremos isto usando o editor <code>vi</code>. Você pode usar outro editor de sua preferência. Falaremos de <code>Vim</code> e do <code>vscode</code> em aulas futuras. Para usuários Windows que não possuem interesse em usar o <code>vi</code>, é possível usar o <em>Bloco de Notas</em>. Basta executar o <code>notepad.exe</code>, passando como argumento o nome do arquivo.</p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-36-1"><a id="__codelineno-36-1" name="__codelineno-36-1" href="#__codelineno-36-1"></a>vi<span class="w"> </span>ola.sh
</span></code></pre></div>
<p>O <code>vi</code> é um editor de textos <em>modal</em> básico, disponível no <em>bash</em>. Modal significa que ele funciona em diferentes modos. No momento em que o abrimos, ele está no <em>modo de comando</em> (command mode). Para editá-lo, precisamos alternar para o <em>modo de digitação</em> (type mode).</p>
<p>Existem diferentes formas para alternarmos para o modo de digitação, mas a que iremos usar aqui aplica um comando antes: O comando shift+O cria uma linha acima da linha onde estamos posicionados (que é a primeira linha), e posiciona o cursor na nova linha em branco, mudando para o modo de digitação.</p>
<p><a class="glightbox" href="../../imagens/vi-typemode.png" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="image" src="../../imagens/vi-typemode.png"></a>
Agora podemos digitar a nossa linha do <em>shebang</em>:
</p><div class="language-bash highlight"><pre><span></span><code><span id="__span-37-1"><a id="__codelineno-37-1" name="__codelineno-37-1" href="#__codelineno-37-1"></a><span class="ch">#!/bin/bash</span>
</span></code></pre></div>
<p>Para concluir a edição, precisamos antes voltar para o modo de comando, usando a tecla ESC. De volta ao modo de comando, usamos o <code>:w</code> para salvar o arquivo (pressionando ENTER/RETURN logo em seguida). Para sair do editor <em>vi</em>, usamos o comando <code>:q</code> e pressionamos ENTER/RETURN.</p>
<p>Isto não afeta em nada o funcionamento do nosso script atual. Mas à medida que você aprende a viver no shell, você poderá criar outros tipos de script. Como, por exemplo, scripts em <em>Python</em>, que você poderá transformar em executáveis e usar um <em>shebang</em> adequado para que o shell saiba como executá-los.</p>
<p>O exemplo a seguir pode não funcionar no seu sistema se você não possuir o interpretador do Python instalado.</p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-38-1"><a id="__codelineno-38-1" name="__codelineno-38-1" href="#__codelineno-38-1"></a>which<span class="w"> </span>python
</span><span id="__span-38-2"><a id="__codelineno-38-2" name="__codelineno-38-2" href="#__codelineno-38-2"></a>cat<span class="w"> </span>&gt;<span class="w"> </span>ola.py
</span><span id="__span-38-3"><a id="__codelineno-38-3" name="__codelineno-38-3" href="#__codelineno-38-3"></a><span class="c1">#!/usr/bin/python</span>
</span><span id="__span-38-4"><a id="__codelineno-38-4" name="__codelineno-38-4" href="#__codelineno-38-4"></a>print<span class="o">(</span><span class="s2">"Olá, mundo"</span><span class="o">)</span>
</span><span id="__span-38-5"><a id="__codelineno-38-5" name="__codelineno-38-5" href="#__codelineno-38-5"></a>^C
</span><span id="__span-38-6"><a id="__codelineno-38-6" name="__codelineno-38-6" href="#__codelineno-38-6"></a>chmod<span class="w"> </span>+x<span class="w"> </span>ola.py
</span><span id="__span-38-7"><a id="__codelineno-38-7" name="__codelineno-38-7" href="#__codelineno-38-7"></a>./ola.py
</span></code></pre></div>
<p>Agora que vimos como podemos executar nossos scripts, vamos aprender como fazer melhor uso deles.</p>
<h3 id="272-recebendo-argumentos-em-scripts">2.7.2 - Recebendo argumentos em Scripts</h3>
<p>Ao longo destas aulas temos usado diversos comandos que recebem argumentos como forma de ter algum controle sobre o seu comportamento, e não é diferente com os scripts que podemos construir. O Bash nos permite receber argumentos em nossos scripts através de parâmetros numerados.</p>
<p>Para ler estes parâmetros, podemos usar variáveis especiais usando a notação com o sinal <code>$</code> e o número dos parâmetros de 1 a 9. Por exemplo:</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Não se esqueça de dar permissão de execução para os arquivos de script antes de testá-los</p>
</div>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-39-1"><a id="__codelineno-39-1" name="__codelineno-39-1" href="#__codelineno-39-1"></a>cat<span class="w"> </span>&gt;<span class="w"> </span>params.sh
</span><span id="__span-39-2"><a id="__codelineno-39-2" name="__codelineno-39-2" href="#__codelineno-39-2"></a><span class="nb">echo</span><span class="w"> </span><span class="s2">"Início da execução"</span>
</span><span id="__span-39-3"><a id="__codelineno-39-3" name="__codelineno-39-3" href="#__codelineno-39-3"></a><span class="nb">echo</span><span class="w"> </span><span class="nv">$1</span>
</span><span id="__span-39-4"><a id="__codelineno-39-4" name="__codelineno-39-4" href="#__codelineno-39-4"></a><span class="nb">echo</span><span class="w"> </span><span class="s2">"Fim da execução"</span>
</span></code></pre></div>
<p>Uma variação do famoso "Olá, mundo", mas que consegue saudar uma pessoa:
</p><div class="language-bash highlight"><pre><span></span><code><span id="__span-40-1"><a id="__codelineno-40-1" name="__codelineno-40-1" href="#__codelineno-40-1"></a>cat<span class="w"> </span>&gt;<span class="w"> </span>saudar.sh
</span><span id="__span-40-2"><a id="__codelineno-40-2" name="__codelineno-40-2" href="#__codelineno-40-2"></a><span class="nb">echo</span><span class="w"> </span><span class="s2">"Olá, "</span><span class="w"> </span><span class="nv">$1</span>
</span></code></pre></div>
<p>Um script de exemplo pra fazer um cálculo aritmético:
</p><div class="language-bash highlight"><pre><span></span><code><span id="__span-41-1"><a id="__codelineno-41-1" name="__codelineno-41-1" href="#__codelineno-41-1"></a>cat<span class="w"> </span>&gt;<span class="w"> </span>soma.sh
</span><span id="__span-41-2"><a id="__codelineno-41-2" name="__codelineno-41-2" href="#__codelineno-41-2"></a><span class="nb">echo</span><span class="w"> </span><span class="k">$((</span><span class="nv">$1</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="nv">$2</span><span class="k">))</span>
</span></code></pre></div>
<p>Existem, também, outros parâmetros especiais para tornar o script mais dinâmico:
- <code>$@</code>: lista todos os parâmetros, não limitados a 9.
- <code>$#</code>: retorna o número de argumentos usados na execução do script
- <code>$0</code>: retorna o nome do script que está sendo executado
- <code>$$</code>: retorna o número do processo que executa o script
- <code>$?</code>: retorna o código de saída do programa anterior</p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-42-1"><a id="__codelineno-42-1" name="__codelineno-42-1" href="#__codelineno-42-1"></a>cat<span class="w"> </span>&gt;<span class="w"> </span>fancy.sh
</span><span id="__span-42-2"><a id="__codelineno-42-2" name="__codelineno-42-2" href="#__codelineno-42-2"></a><span class="nb">echo</span><span class="w"> </span><span class="s2">"Iniciando a execução de </span><span class="nv">$0</span><span class="s2"> no processo </span><span class="nv">$$</span><span class="s2">"</span>
</span><span id="__span-42-3"><a id="__codelineno-42-3" name="__codelineno-42-3" href="#__codelineno-42-3"></a><span class="nb">echo</span><span class="w"> </span><span class="s2">"Usando </span><span class="nv">$#</span><span class="s2"> parâmetros: </span><span class="nv">$@</span><span class="s2">"</span>
</span><span id="__span-42-4"><a id="__codelineno-42-4" name="__codelineno-42-4" href="#__codelineno-42-4"></a>ls<span class="w"> </span>-lha
</span><span id="__span-42-5"><a id="__codelineno-42-5" name="__codelineno-42-5" href="#__codelineno-42-5"></a><span class="nb">echo</span><span class="w"> </span><span class="s2">"Resultado do comando: </span><span class="nv">$?</span><span class="s2">"</span>
</span></code></pre></div>
<h2 id="28-conclusao">2.8 - Conclusão</h2>
<p>Nesta aula aprendemos o básico a respeito da criação de scripts usando o Bash. Técnicas mais complexas e sofisticadas serão apresentadas na aula de Scripts Avançados, que veremos no futuro. Por ora, podemos mudar o nosso foco para o uso de Editores de Texto como ferramentas produtivas para profissionais de TI.</p>
<p>Nos vemos na próxima aula.</p></div><style type="text/css">.quiz {
  border: 1px solid black;
  padding: 1rem;
  margin: 1rem 0;
}
/* Set margin-top of first quiz child */
.quiz > *:first-child {
  margin-top: 0;
}
.hidden {
  display: none;
}

form button {
  background-color: var(--md-primary-fg-color);
  border: none;
  color: var(--md-primary-bg-color);
  padding: 0.5rem 1rem;
  text-align: center;
  text-decoration: none;
  display: inline-block;
  font-size: 0.8rem;
}

.wrong label {
  color: red;
}
.correct label {
  color: green;
}

fieldset {
  border: none;
  display: flex;
  flex-direction: column;
}
fieldset input {
  margin: 0 10px;
}
fieldset label {
  margin: 0 10px;
}

label.correct {
  color: green;
}
label.wrong {
  color: red;
}
input[type='radio'].correct {
  accent-color: green;
}
input[type='radio'].wrong {
  accent-color: red;
}
.content {
  margin: 10px;
}
</style><script type="text/javascript" defer>document.querySelectorAll('.quiz').forEach((quiz) => {
  let form = quiz.querySelector('form');
  let fieldset = form.querySelector('fieldset');
  form.addEventListener('submit', (event) => {
    event.preventDefault();
    let selectedAnswers = form.querySelectorAll('input[name="answer"]:checked');
    let correctAnswers = fieldset.querySelectorAll(
      'input[name="answer"][correct]'
    );
    // Check if all correct answers are selected
    let is_correct = selectedAnswers.length === correctAnswers.length;
    for (let i = 0; i < selectedAnswers.length; i++) {
      if (!selectedAnswers[i].hasAttribute('correct')) {
        is_correct = false;
        break;
      }
    }
    let section = quiz.querySelector('section');
    if (is_correct) {
      section.classList.remove('hidden');
      resetFieldset(fieldset);
      // Mark all fields with colors
      const allAnswers = fieldset.querySelectorAll('input[name="answer"]');
      for (let i = 0; i < allAnswers.length; i++) {
        if (allAnswers[i].hasAttribute('correct')) {
          allAnswers[i].parentElement.classList.add('correct');
        } else {
          allAnswers[i].parentElement.classList.add('wrong');
        }
      }
    } else {
      section.classList.add('hidden');
      resetFieldset(fieldset);
      // Mark wrong fields with colors
      for (let i = 0; i < selectedAnswers.length; i++) {
        if (!selectedAnswers[i].hasAttribute('correct')) {
          selectedAnswers[i].parentElement.classList.add('wrong');
        } else {
          selectedAnswers[i].parentElement.classList.add('correct');
        }
      }
    }
  });
});

function resetFieldset(fieldset) {
  const fieldsetChildren = fieldset.children;
  for (let i = 0; i < fieldsetChildren.length; i++) {
    fieldsetChildren[i].classList.remove('wrong');
    fieldsetChildren[i].classList.remove('correct');
  }
}
</script>







  
    
  
  


  <aside class="md-source-file">
    
      
  <span class="md-source-file__fact">
    <span class="md-icon" title="Última atualização">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M21 13.1c-.1 0-.3.1-.4.2l-1 1 2.1 2.1 1-1c.2-.2.2-.6 0-.8l-1.3-1.3c-.1-.1-.2-.2-.4-.2m-1.9 1.8-6.1 6V23h2.1l6.1-6.1-2.1-2M12.5 7v5.2l4 2.4-1 1L11 13V7h1.5M11 21.9c-5.1-.5-9-4.8-9-9.9C2 6.5 6.5 2 12 2c5.3 0 9.6 4.1 10 9.3-.3-.1-.6-.2-1-.2s-.7.1-1 .2C19.6 7.2 16.2 4 12 4c-4.4 0-8 3.6-8 8 0 4.1 3.1 7.5 7.1 7.9l-.1.2v1.8Z"/></svg>
    </span>
    <span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-date">August 8, 2024</span>
  </span>

    
    
    
      
  
  <span class="md-source-file__fact">
    <span class="md-icon" title="Contribuidores">
      
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 4a4 4 0 0 1 4 4 4 4 0 0 1-4 4 4 4 0 0 1-4-4 4 4 0 0 1 4-4m0 10c4.42 0 8 1.79 8 4v2H4v-2c0-2.21 3.58-4 8-4Z"/></svg>
      
    </span>
    <nav>
      dmyoko
    </nav>
  </span>

    
    
  </aside>





                
              </article>
            </div>
          
          
  <script>var tabs=__md_get("__tabs");if(Array.isArray(tabs))e:for(var set of document.querySelectorAll(".tabbed-set")){var tab,labels=set.querySelector(".tabbed-labels");for(tab of tabs)for(var label of labels.getElementsByTagName("label"))if(label.innerText.trim()===tab){var input=document.getElementById(label.htmlFor);input.checked=!0;continue e}}</script>

<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
        <div class="md-social">
  
    
    
    
    
      
      
    
    <a href="https://www.twitch.tv/codandocomotio" target="_blank" rel="noopener" title="www.twitch.tv" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 6.5.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M391.17 103.47h-38.63v109.7h38.63ZM285 103h-38.63v109.75H285ZM120.83 0 24.31 91.42v329.16h115.83V512l96.53-91.42h77.25L487.69 256V0Zm328.24 237.75-77.22 73.12h-77.24l-67.6 64v-64h-86.87V36.58h308.93Z"/></svg>
    </a>
  
    
    
    
    
      
      
    
    <a href="https://github.com/moreirayokoyama" target="_blank" rel="noopener" title="github.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.5.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg>
    </a>
  
    
    
    
    
      
      
    
    <a href="https://www.youtube.com/@CodandoComOTio" target="_blank" rel="noopener" title="www.youtube.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 576 512"><!--! Font Awesome Free 6.5.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M549.655 124.083c-6.281-23.65-24.787-42.276-48.284-48.597C458.781 64 288 64 288 64S117.22 64 74.629 75.486c-23.497 6.322-42.003 24.947-48.284 48.597-11.412 42.867-11.412 132.305-11.412 132.305s0 89.438 11.412 132.305c6.281 23.65 24.787 41.5 48.284 47.821C117.22 448 288 448 288 448s170.78 0 213.371-11.486c23.497-6.321 42.003-24.171 48.284-47.821 11.412-42.867 11.412-132.305 11.412-132.305s0-89.438-11.412-132.305zm-317.51 213.508V175.185l142.739 81.205-142.739 81.201z"/></svg>
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    <script id="__config" type="application/json">{"base": "../..", "features": ["content.code.annotate", "content.code.copy", "content.tabs.link", "search.suggest", "search.highlight", "search.share", "content.footnote.tooltips"], "search": "../../assets/javascripts/workers/search.b8dbb3d2.min.js", "translations": {"clipboard.copied": "Copiado para \u00e1rea de transfer\u00eancia", "clipboard.copy": "Copiar para \u00e1rea de transfer\u00eancia", "search.result.more.one": "mais 1 nesta p\u00e1gina", "search.result.more.other": "# mais nesta p\u00e1gina", "search.result.none": "Nenhum documento encontrado", "search.result.one": "1 documento encontrado", "search.result.other": "# documentos encontrados", "search.result.placeholder": "Digite para iniciar a busca", "search.result.term.missing": "Ausente", "select.version": "Selecione a vers\u00e3o"}}</script>
    
    
      <script src="../../assets/javascripts/bundle.fe8b6f2b.min.js"></script>
      
    
  <script id="init-glightbox">const lightbox = GLightbox({"touchNavigation": true, "loop": false, "zoomable": true, "draggable": true, "openEffect": "zoom", "closeEffect": "zoom", "slideEffect": "slide"});
document$.subscribe(() => { lightbox.reload() });
</script></body>
</html>